{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Vishal\\\\webdev\\\\alumni\\\\induction-website\\\\client\\\\src\\\\components\\\\account\\\\Login.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { API } from '../../service/api';\nimport { DataContext } from '../../context/DataProvider';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst loginInitialValues = {\n  username: '',\n  password: ''\n};\nconst signupInitialValues = {\n  name: '',\n  username: '',\n  password: ''\n};\nexport const Login = () => {\n  _s();\n  const [login, setLogin] = useState(loginInitialValues);\n  const [signup, setSignup] = useState(signupInitialValues);\n  const [error, showError] = useState('');\n  const [account, toggleAccount] = useState('login');\n  const navigate = useNavigate();\n  const {\n    setAccount\n  } = useContext(DataContext);\n  useEffect(() => {\n    showError(false);\n  }, [login]);\n  const onValueChange = e => {\n    setLogin({\n      ...login,\n      [e.target.name]: e.target.value\n    });\n  };\n  const onInputChange = e => {\n    setSignup({\n      ...signup,\n      [e.target.name]: e.target.value\n    });\n  };\n  const loginUser = async () => {\n    let response = await API.userLogin(login);\n    if (response.isSuccess) {\n      showError('');\n      sessionStorage.setItem('accessToken', `Bearer ${response.data.accessToken}`);\n      sessionStorage.setItem('refreshToken', `Bearer ${response.data.refreshToken}`);\n      setAccount({\n        name: response.data.name,\n        username: response.data.username\n      });\n      isUserAuthenticated(true);\n      setLogin(loginInitialValues);\n      navigate('/');\n    } else {\n      showError('Something went wrong! please try again later');\n    }\n  };\n  const signupUser = async () => {\n    let response = await API.userSignup(signup);\n    if (response.isSuccess) {\n      showError('');\n      setSignup(signupInitialValues);\n      toggleAccount('login');\n    } else {\n      showError('Something went wrong! please try again later');\n    }\n  };\n  const toggleSignup = () => {\n    account === 'signup' ? toggleAccount('login') : toggleAccount('signup');\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"username\",\n        value: login.username,\n        label: \"enter the username\",\n        onChange: e => {\n          onValueChange(e);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"password\",\n        value: login.password,\n        label: \"password\",\n        onChange: e => {\n          onValueChange(e);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => loginUser(),\n        children: \"submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n_s(Login, \"wp+JfI7ME9/4cw/3NvAsD7PO2/c=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useNavigate","API","DataContext","loginInitialValues","username","password","signupInitialValues","name","Login","login","setLogin","signup","setSignup","error","showError","account","toggleAccount","navigate","setAccount","onValueChange","e","target","value","onInputChange","loginUser","response","userLogin","isSuccess","sessionStorage","setItem","data","accessToken","refreshToken","isUserAuthenticated","signupUser","userSignup","toggleSignup"],"sources":["C:/Users/Vishal/webdev/alumni/induction-website/client/src/components/account/Login.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react'\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\n\r\nimport { API } from '../../service/api';\r\nimport { DataContext } from '../../context/DataProvider';\r\n\r\n\r\n\r\nconst loginInitialValues = {\r\n    username: '',\r\n    password: ''\r\n};\r\n\r\nconst signupInitialValues = {\r\n    name: '',\r\n    username: '',\r\n    password: '',\r\n};\r\nexport const Login = () => {\r\n    const [login, setLogin] = useState(loginInitialValues);\r\n    const [signup, setSignup] = useState(signupInitialValues);\r\n    const [error, showError] = useState('');\r\n    const [account, toggleAccount] = useState('login');\r\n\r\n    const navigate = useNavigate();\r\n    const { setAccount } = useContext(DataContext);\r\n    useEffect(() => {\r\n        showError(false);\r\n    }, [login])\r\n\r\n    const onValueChange = (e) => {\r\n        setLogin({ ...login, [e.target.name]: e.target.value });\r\n    }\r\n\r\n    const onInputChange = (e) => {\r\n        setSignup({ ...signup, [e.target.name]: e.target.value });\r\n    }\r\n\r\n    const loginUser = async () => {\r\n        let response = await API.userLogin(login);\r\n        if (response.isSuccess) {\r\n            showError('');\r\n\r\n            sessionStorage.setItem('accessToken', `Bearer ${response.data.accessToken}`);\r\n            sessionStorage.setItem('refreshToken', `Bearer ${response.data.refreshToken}`);\r\n            setAccount({ name: response.data.name, username: response.data.username });\r\n\r\n            isUserAuthenticated(true)\r\n            setLogin(loginInitialValues);\r\n            navigate('/');\r\n        } else {\r\n            showError('Something went wrong! please try again later');\r\n        }\r\n    }\r\n\r\n    const signupUser = async () => {\r\n        let response = await API.userSignup(signup);\r\n        if (response.isSuccess) {\r\n            showError('');\r\n            setSignup(signupInitialValues);\r\n            toggleAccount('login');\r\n        } else {\r\n            showError('Something went wrong! please try again later');\r\n        }\r\n    }\r\n\r\n    const toggleSignup = () => {\r\n        account === 'signup' ? toggleAccount('login') : toggleAccount('signup');\r\n    }\r\n\r\n\r\n\r\n\r\n    return (\r\n        <>\r\n            <div>\r\n                <input name=\"username\" value={login.username} label='enter the username' onChange={(e) => { onValueChange(e) }} ></input>\r\n                <input name=\"password\" value={login.password} label='password' onChange={(e) => { onValueChange(e) }} ></input>\r\n                <button onClick={() => loginUser()}>\r\n                    submit\r\n                </button>\r\n            </div>\r\n\r\n        </>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}