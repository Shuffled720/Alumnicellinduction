{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Vishal\\\\webdev\\\\alumni\\\\induction-website\\\\client\\\\src\\\\components\\\\account\\\\Login.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const Login = _ref => {\n  _s();\n  let {\n    isUserAuthenticated\n  } = _ref;\n  const [login, setLogin] = useState(loginInitialValues);\n  const [signup, setSignup] = useState(signupInitialValues);\n  const [error, showError] = useState('');\n  const [account, toggleAccount] = useState('login');\n  const navigate = useNavigate();\n  const {\n    setAccount\n  } = useContext(DataContext);\n  useEffect(() => {\n    showError(false);\n  }, [login]);\n  const onValueChange = e => {\n    setLogin({\n      ...login,\n      [e.target.name]: e.target.value\n    });\n  };\n  const onInputChange = e => {\n    setSignup({\n      ...signup,\n      [e.target.name]: e.target.value\n    });\n  };\n  const loginUser = async () => {\n    let response = await API.userLogin(login);\n    if (response.isSuccess) {\n      showError('');\n      sessionStorage.setItem('accessToken', `Bearer ${response.data.accessToken}`);\n      sessionStorage.setItem('refreshToken', `Bearer ${response.data.refreshToken}`);\n      setAccount({\n        name: response.data.name,\n        username: response.data.username\n      });\n      isUserAuthenticated(true);\n      setLogin(loginInitialValues);\n      navigate('/');\n    } else {\n      showError('Something went wrong! please try again later');\n    }\n  };\n  const signupUser = async () => {\n    let response = await API.userSignup(signup);\n    if (response.isSuccess) {\n      showError('');\n      setSignup(signupInitialValues);\n      toggleAccount('login');\n    } else {\n      showError('Something went wrong! please try again later');\n    }\n  };\n  const toggleSignup = () => {\n    account === 'signup' ? toggleAccount('login') : toggleAccount('signup');\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"username\",\n        value: login.username,\n        label: \"enter the username\",\n        onChange: e => {\n          onValueChange(e);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"password\",\n        value: login.password,\n        label: \"password\",\n        onChange: e => {\n          onValueChange(e);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => loginUser(),\n        children: \"submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n_s(Login, \"wp+JfI7ME9/4cw/3NvAsD7PO2/c=\", true);\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","Login","isUserAuthenticated","login","setLogin","loginInitialValues","signup","setSignup","signupInitialValues","error","showError","account","toggleAccount","navigate","useNavigate","setAccount","useContext","DataContext","useEffect","onValueChange","e","target","name","value","onInputChange","loginUser","response","API","userLogin","isSuccess","sessionStorage","setItem","data","accessToken","refreshToken","username","signupUser","userSignup","toggleSignup","password"],"sources":["C:/Users/Vishal/webdev/alumni/induction-website/client/src/components/account/Login.js"],"sourcesContent":["import React, { useState } from 'react'\r\n\r\nexport const Login = ({ isUserAuthenticated }) => {\r\n    const [login, setLogin] = useState(loginInitialValues);\r\n    const [signup, setSignup] = useState(signupInitialValues);\r\n    const [error, showError] = useState('');\r\n    const [account, toggleAccount] = useState('login');\r\n\r\n    const navigate = useNavigate();\r\n    const { setAccount } = useContext(DataContext);\r\n    useEffect(() => {\r\n        showError(false);\r\n    }, [login])\r\n\r\n    const onValueChange = (e) => {\r\n        setLogin({ ...login, [e.target.name]: e.target.value });\r\n    }\r\n\r\n    const onInputChange = (e) => {\r\n        setSignup({ ...signup, [e.target.name]: e.target.value });\r\n    }\r\n\r\n    const loginUser = async () => {\r\n        let response = await API.userLogin(login);\r\n        if (response.isSuccess) {\r\n            showError('');\r\n\r\n            sessionStorage.setItem('accessToken', `Bearer ${response.data.accessToken}`);\r\n            sessionStorage.setItem('refreshToken', `Bearer ${response.data.refreshToken}`);\r\n            setAccount({ name: response.data.name, username: response.data.username });\r\n\r\n            isUserAuthenticated(true)\r\n            setLogin(loginInitialValues);\r\n            navigate('/');\r\n        } else {\r\n            showError('Something went wrong! please try again later');\r\n        }\r\n    }\r\n\r\n    const signupUser = async () => {\r\n        let response = await API.userSignup(signup);\r\n        if (response.isSuccess) {\r\n            showError('');\r\n            setSignup(signupInitialValues);\r\n            toggleAccount('login');\r\n        } else {\r\n            showError('Something went wrong! please try again later');\r\n        }\r\n    }\r\n\r\n    const toggleSignup = () => {\r\n        account === 'signup' ? toggleAccount('login') : toggleAccount('signup');\r\n    }\r\n\r\n\r\n\r\n\r\n    return (\r\n        <>\r\n            <div>\r\n                <input name=\"username\" value={login.username} label='enter the username' onChange={(e) => { onValueChange(e) }} ></input>\r\n                <input name=\"password\" value={login.password} label='password' onChange={(e) => { onValueChange(e) }} ></input>\r\n                <button onClick={() => loginUser()}>\r\n                    submit\r\n                </button>\r\n            </div>\r\n\r\n        </>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}