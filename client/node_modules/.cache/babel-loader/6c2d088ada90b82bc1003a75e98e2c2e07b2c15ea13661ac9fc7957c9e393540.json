{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Vishal\\\\webdev\\\\alumni\\\\induction-website\\\\client\\\\src\\\\components\\\\account\\\\Login.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { API } from '../../services/api';\nimport { DataContext } from '../../context/DataProvider';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst loginInitialValues = {\n  username: '',\n  password: ''\n};\nconst signupInitialValues = {\n  name: '',\n  username: '',\n  password: ''\n};\nexport const Login = _ref => {\n  _s();\n  let {\n    isUserAuthenticated\n  } = _ref;\n  const [login, setLogin] = useState(loginInitialValues);\n  const [signup, setSignup] = useState(signupInitialValues);\n  const [error, showError] = useState('');\n  const [account, toggleAccount] = useState('login');\n  const navigate = useNavigate();\n  const {\n    setAccount\n  } = useContext(DataContext);\n  useEffect(() => {\n    showError(false);\n  }, [login]);\n  const onValueChange = e => {\n    setLogin({\n      ...login,\n      [e.target.name]: e.target.value\n    });\n  };\n  const onInputChange = e => {\n    setSignup({\n      ...signup,\n      [e.target.name]: e.target.value\n    });\n  };\n  const loginUser = async () => {\n    let response = await API.userLogin(login);\n    if (response.isSuccess) {\n      showError('');\n      sessionStorage.setItem('accessToken', `Bearer ${response.data.accessToken}`);\n      sessionStorage.setItem('refreshToken', `Bearer ${response.data.refreshToken}`);\n      setAccount({\n        name: response.data.name,\n        username: response.data.username\n      });\n      isUserAuthenticated(true);\n      setLogin(loginInitialValues);\n      navigate('/');\n    } else {\n      showError('Something went wrong! please try again later');\n    }\n  };\n  const signupUser = async () => {\n    let response = await API.userSignup(signup);\n    if (response.isSuccess) {\n      showError('');\n      setSignup(signupInitialValues);\n      toggleAccount('login');\n    } else {\n      showError('Something went wrong! please try again later');\n    }\n  };\n  const toggleSignup = () => {\n    account === 'signup' ? toggleAccount('login') : toggleAccount('signup');\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"kbhkbhjvj\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n_s(Login, \"wp+JfI7ME9/4cw/3NvAsD7PO2/c=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useNavigate","API","DataContext","loginInitialValues","username","password","signupInitialValues","name","Login","isUserAuthenticated","login","setLogin","signup","setSignup","error","showError","account","toggleAccount","navigate","setAccount","onValueChange","e","target","value","onInputChange","loginUser","response","userLogin","isSuccess","sessionStorage","setItem","data","accessToken","refreshToken","signupUser","userSignup","toggleSignup"],"sources":["C:/Users/Vishal/webdev/alumni/induction-website/client/src/components/account/Login.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react'\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\n\r\nimport { API } from '../../services/api';\r\nimport { DataContext } from '../../context/DataProvider';\r\n\r\n\r\n\r\nconst loginInitialValues = {\r\n    username: '',\r\n    password: ''\r\n};\r\n\r\nconst signupInitialValues = {\r\n    name: '',\r\n    username: '',\r\n    password: '',\r\n};\r\nexport const Login = ({ isUserAuthenticated }) => {\r\n    const [login, setLogin] = useState(loginInitialValues);\r\n    const [signup, setSignup] = useState(signupInitialValues);\r\n    const [error, showError] = useState('');\r\n    const [account, toggleAccount] = useState('login');\r\n\r\n    const navigate = useNavigate();\r\n    const { setAccount } = useContext(DataContext);\r\n    useEffect(() => {\r\n        showError(false);\r\n    }, [login])\r\n\r\n    const onValueChange = (e) => {\r\n        setLogin({ ...login, [e.target.name]: e.target.value });\r\n    }\r\n\r\n    const onInputChange = (e) => {\r\n        setSignup({ ...signup, [e.target.name]: e.target.value });\r\n    }\r\n\r\n    const loginUser = async () => {\r\n        let response = await API.userLogin(login);\r\n        if (response.isSuccess) {\r\n            showError('');\r\n\r\n            sessionStorage.setItem('accessToken', `Bearer ${response.data.accessToken}`);\r\n            sessionStorage.setItem('refreshToken', `Bearer ${response.data.refreshToken}`);\r\n            setAccount({ name: response.data.name, username: response.data.username });\r\n\r\n            isUserAuthenticated(true)\r\n            setLogin(loginInitialValues);\r\n            navigate('/');\r\n        } else {\r\n            showError('Something went wrong! please try again later');\r\n        }\r\n    }\r\n\r\n    const signupUser = async () => {\r\n        let response = await API.userSignup(signup);\r\n        if (response.isSuccess) {\r\n            showError('');\r\n            setSignup(signupInitialValues);\r\n            toggleAccount('login');\r\n        } else {\r\n            showError('Something went wrong! please try again later');\r\n        }\r\n    }\r\n\r\n    const toggleSignup = () => {\r\n        account === 'signup' ? toggleAccount('login') : toggleAccount('signup');\r\n    }\r\n\r\n\r\n\r\n\r\n    return (\r\n        <>\r\n            <div>\r\n                kbhkbhjvj\r\n                {/* <input label='Enter Name' value={login.username} name='username' onChange={(e) => onValueChange(e)} ></input>\r\n                <input name=\"password\" value={login.password} label='password' onChange={(e) => { onValueChange(e) }} ></input>\r\n                <button onClick={() => loginUser()}>\r\n                    submit\r\n                </button> */}\r\n            </div>\r\n\r\n        </>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}